const formWriteUs=document.querySelector(".modal-write-us"),modalMap=document.querySelector(".modal-map"),openWriteUsPopup=document.querySelector(".open-write-us-popup"),openMap=document.querySelector(".contacts-map img"),closeWriteUsPopup=document.querySelector(".write-us-close"),closeMap=document.querySelector(".map-close"),buttonServices=document.querySelectorAll(".btn-services"),servicesDescription=document.querySelectorAll(".services-description"),advantagesSlider=[...document.querySelectorAll(".slider")],sliderButtonsPrev=document.querySelectorAll(".slider-btn-prev-slide"),sliderButtonsNext=document.querySelectorAll(".slider-btn-next-slide"),searchInput=document.querySelector("#search"),searchParagraph=document.querySelector(".top-menu-search"),dirIcons=document.querySelectorAll(".icon-dir"),sortTypes=document.querySelectorAll(".sort-type"),banner=document.querySelector(".banner"),buyButtons=document.querySelectorAll(".buy"),btnBannerClose=document.querySelector(".banner-close");let paginationButtons=[...document.querySelectorAll(".pagination-item")];const basket=document.querySelector(".top-menu-basket"),bookmark=document.querySelector(".top-menu-bookmark"),bookmarkButtons=document.querySelectorAll(".bookmark"),buttonContinueShopping=document.querySelector(".btn-continue-shopping");let basketEnumerator=0,bookmarkEnumerator=0;const changeServicesDescription=e=>{for(const e of servicesDescription)e.classList.add("invisible");for(const e of buttonServices)e.classList.remove("btn-service-current");[...servicesDescription].filter(t=>t.dataset.services===e.target.id)[0].classList.remove("invisible"),[...buttonServices].filter(t=>t.id===e.target.id)[0].classList.add("btn-service-current")},getIndexElementInArray=(e,t,n)=>{if(n){for(const n of e)if(n.classList.contains(t))return e.indexOf(n)}else for(const n of e)if(!n.classList.contains(t))return e.indexOf(n);return 0},makeAllSlidesInvisible=()=>{for(const e of advantagesSlider)e.classList.add("invisible")},changeFillIconDir=()=>{for(const e of dirIcons)e.classList.remove("current-icon-dir")},changeFillCurrentDir=e=>{e.classList.add("current-icon-dir")},removeClassFromSortType=()=>{for(const e of sortTypes)e.classList.remove("current-sort-type")},setCurrentClassInSortType=e=>{e.classList.add("current-sort-type")},removeClassFromPagination=()=>{for(const e of paginationButtons)e.classList.remove("pagination-current")},setClassForPagination=e=>{e.classList.add("pagination-current")},getNextPagination=()=>{paginationButtons=[...document.querySelectorAll(".pagination-item")];let e=getIndexElementInArray(paginationButtons,"pagination-current",!0);++e<paginationButtons.length-1&&(removeClassFromPagination(),paginationButtons[e].classList.add("pagination-current"))};openWriteUsPopup&&openWriteUsPopup.addEventListener("click",e=>{e.preventDefault(),formWriteUs.classList.add("open-popup"),formWriteUs.style.top=window.pageYOffset+document.documentElement.clientHeight/2-215+"px",formWriteUs.style.left=window.pageXOffset+document.documentElement.clientWidth/2-310+"px"}),openMap&&openMap.addEventListener("click",()=>{modalMap.classList.add("open-popup"),modalMap.style.top=window.pageYOffset+document.documentElement.clientHeight/2-225+"px",modalMap.style.left=window.pageXOffset+document.documentElement.clientWidth/2-470+"px"}),closeWriteUsPopup&&closeWriteUsPopup.addEventListener("click",()=>{formWriteUs.classList.remove("open-popup")}),closeMap&&closeMap.addEventListener("click",()=>{modalMap.classList.remove("open-popup")});for(const e of buttonServices)e.addEventListener("click",e=>{changeServicesDescription(e)});for(const e of sliderButtonsNext)e.addEventListener("click",e=>{let t=getIndexElementInArray(advantagesSlider,"invisible",!1);makeAllSlidesInvisible(),++t>=advantagesSlider.length?advantagesSlider[0].classList.remove("invisible"):advantagesSlider[t].classList.remove("invisible")});for(const e of sliderButtonsPrev)e.addEventListener("click",e=>{let t=getIndexElementInArray(advantagesSlider,"invisible",!1);makeAllSlidesInvisible(),--t<0?advantagesSlider[advantagesSlider.length-1].classList.remove("invisible"):advantagesSlider[t].classList.remove("invisible")});for(const e of dirIcons)e.addEventListener("click",t=>{t.preventDefault(),changeFillIconDir(),changeFillCurrentDir(e)});for(const e of sortTypes)e.addEventListener("click",t=>{t.preventDefault(),removeClassFromSortType(),setCurrentClassInSortType(e)});for(const e of buyButtons)e.addEventListener("click",e=>{e.preventDefault(),basket.classList.add("not-empty"),banner.classList.add("open-popup"),banner.style.top=window.pageYOffset+document.documentElement.clientHeight/2-200+"px",banner.style.left=window.pageXOffset+document.documentElement.clientWidth/2-310+"px",basket.children[0].textContent=`Корзина: ${++basketEnumerator}`});for(const e of bookmarkButtons)e.addEventListener("click",e=>{e.preventDefault(),bookmark.classList.add("not-empty"),bookmark.children[0].textContent=`Закладки: ${++bookmarkEnumerator}`});btnBannerClose&&btnBannerClose.addEventListener("click",()=>{banner.classList.remove("open-popup")});for(const e of paginationButtons)e.addEventListener("click",t=>{t.preventDefault(),e.classList.contains("pagination-next")?getNextPagination():(removeClassFromPagination(),setClassForPagination(e))});searchInput.addEventListener("focus",()=>{searchParagraph.classList.add("input-focus")}),searchInput.addEventListener("blur",()=>{searchParagraph.classList.remove("input-focus")}),buttonContinueShopping.addEventListener("click",()=>{btnBannerClose.click()});
