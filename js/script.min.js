const formWriteUs=document.querySelector(`.modal-write-us`),modalMap=document.querySelector(`.modal-map`),openWriteUsPopup=document.querySelector(`.open-write-us-popup`),openMap=document.querySelector(`.go-to-google-maps`),closeWriteUsPopup=document.querySelector(`.write-us-close`),closeMap=document.querySelector(`.map-close`),buttonServices=document.querySelectorAll(`.btn-services`),servicesDescription=document.querySelectorAll(`.services-description`),advantagesSlider=[...document.querySelectorAll(`.slider`)],sliderButtonsPrev=document.querySelectorAll(`.slider-btn-prev-slide`),sliderButtonsNext=document.querySelectorAll(`.slider-btn-next-slide`),searchInput=document.querySelector(`#search`),searchParagraph=document.querySelector(`.top-menu-search`),dirIcons=document.querySelectorAll(`.icon-dir`),sortTypes=document.querySelectorAll(`.sort-type`),banner=document.querySelector(`.banner`),buyButtons=document.querySelectorAll(`.buy`),btnBannerClose=document.querySelector(`.banner-close`);let paginationButtons=[...document.querySelectorAll(`.pagination-item`)];const basket=document.querySelector(`.top-menu-basket`),bookmark=document.querySelector(`.top-menu-bookmark`),bookmarkButtons=document.querySelectorAll(`.bookmark`),buttonContinueShopping=document.querySelector(`.btn-continue-shopping`),sendWriteUsForm=document.querySelector(`.btn-write-us-submit`),writeUsPersonName=document.querySelector(`#modal-person-name`),writeUsPersonEmail=document.querySelector(`#modal-person-email`),writeUsText=document.querySelector(`#modal-person-message`);let basketEnumerator=0,bookmarkEnumerator=0;const changeServicesDescription=a=>{for(const b of servicesDescription)b.classList.add(`invisible`);for(const b of buttonServices)b.classList.remove(`btn-service-current`);[...servicesDescription].filter(b=>b.dataset.services===a.target.id)[0].classList.remove(`invisible`),[...buttonServices].filter(b=>b.id===a.target.id)[0].classList.add(`btn-service-current`)},getIndexElementInArray=(a,b,c)=>{if(c){for(const c of a)if(c.classList.contains(b))return a.indexOf(c);}else for(const c of a)if(!c.classList.contains(b))return a.indexOf(c);return 0},makeAllSlidesInvisible=()=>{for(const a of advantagesSlider)a.classList.add(`invisible`)},changeFillIconDir=()=>{for(const a of dirIcons)a.classList.remove(`current-icon-dir`)},changeFillCurrentDir=a=>{a.classList.add(`current-icon-dir`)},removeClassFromSortType=()=>{for(const a of sortTypes)a.classList.remove(`current-sort-type`)},setCurrentClassInSortType=a=>{a.classList.add(`current-sort-type`)},removeClassFromPagination=()=>{for(const a of paginationButtons)a.classList.remove(`pagination-current`)},setClassForPagination=a=>{a.classList.add(`pagination-current`)},getNextPagination=()=>{paginationButtons=[...document.querySelectorAll(`.pagination-item`)];let a=getIndexElementInArray(paginationButtons,`pagination-current`,!0);a++,a<paginationButtons.length-1&&(removeClassFromPagination(),paginationButtons[a].classList.add(`pagination-current`))};openWriteUsPopup&&openWriteUsPopup.addEventListener(`click`,a=>{a.preventDefault(),formWriteUs.classList.add(`open-popup`),formWriteUs.classList.add(`show-modal-write-us`),formWriteUs.style.top=window.pageYOffset+document.documentElement.clientHeight/2-215+`px`,formWriteUs.style.left=window.pageXOffset+document.documentElement.clientWidth/2-310+`px`,setTimeout(()=>{formWriteUs.classList.remove(`show-modal-write-us`)},1e3)}),openMap&&openMap.addEventListener(`click`,a=>{a.preventDefault(),modalMap.classList.add(`open-popup`),modalMap.style.top=window.pageYOffset+document.documentElement.clientHeight/2-225+`px`,modalMap.style.left=window.pageXOffset+document.documentElement.clientWidth/2-470+`px`}),closeWriteUsPopup&&closeWriteUsPopup.addEventListener(`click`,()=>{formWriteUs.classList.remove(`form-error`),formWriteUs.classList.remove(`open-popup`)}),closeMap&&closeMap.addEventListener(`click`,()=>{modalMap.classList.remove(`open-popup`)});for(const a of buttonServices)a.addEventListener(`click`,a=>{changeServicesDescription(a)});for(const a of sliderButtonsNext)a.addEventListener(`click`,()=>{let a=getIndexElementInArray(advantagesSlider,`invisible`,!1);makeAllSlidesInvisible(),a++,a>=advantagesSlider.length?advantagesSlider[0].classList.remove(`invisible`):advantagesSlider[a].classList.remove(`invisible`)});for(const a of sliderButtonsPrev)a.addEventListener(`click`,()=>{let a=getIndexElementInArray(advantagesSlider,`invisible`,!1);makeAllSlidesInvisible(),a--,0>a?advantagesSlider[advantagesSlider.length-1].classList.remove(`invisible`):advantagesSlider[a].classList.remove(`invisible`)});for(const a of dirIcons)a.addEventListener(`click`,b=>{b.preventDefault(),changeFillIconDir(),changeFillCurrentDir(a)});for(const a of sortTypes)a.addEventListener(`click`,b=>{b.preventDefault(),removeClassFromSortType(),setCurrentClassInSortType(a)});for(const a of buyButtons)a.addEventListener(`click`,a=>{a.preventDefault(),basket.classList.add(`not-empty`),banner.classList.add(`open-popup`),banner.style.top=window.pageYOffset+document.documentElement.clientHeight/2-200+`px`,banner.style.left=window.pageXOffset+document.documentElement.clientWidth/2-310+`px`,basket.children[0].textContent=`Корзина: ${++basketEnumerator}`});for(const a of bookmarkButtons)a.addEventListener(`click`,a=>{a.preventDefault(),bookmark.classList.add(`not-empty`),bookmark.children[0].textContent=`Закладки: ${++bookmarkEnumerator}`});btnBannerClose&&btnBannerClose.addEventListener(`click`,()=>{banner.classList.remove(`open-popup`)});for(const a of paginationButtons)a.addEventListener(`click`,b=>{b.preventDefault(),a.classList.contains(`pagination-next`)?getNextPagination():(removeClassFromPagination(),setClassForPagination(a))});searchInput.addEventListener(`focus`,()=>{searchParagraph.classList.add(`input-focus`)}),searchInput.addEventListener(`blur`,()=>{searchParagraph.classList.remove(`input-focus`)}),buttonContinueShopping.addEventListener(`click`,()=>{btnBannerClose.click()}),sendWriteUsForm&&sendWriteUsForm.addEventListener(`click`,()=>{writeUsPersonName.validity.valid&&writeUsPersonEmail.validity.valid&&writeUsText.validity.valid||(formWriteUs.classList.add(`form-error`),setTimeout(()=>{formWriteUs.classList.remove(`form-error`)},500))});
